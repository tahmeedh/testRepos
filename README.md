## Installation
To install:
```js script
nvm use
npm ci
```

## Run automations

To run test:
Ensure git submodule and dependencies are set up before running tests 
If SERVER is not specify, CPQA2-VA1 will be used by default.
Install dependency : `npm ci` \
Runs all tests on CPQA2: `SERVER=cpqa2 npm run test` \
Runs specific test case: `SERVER=cpqa2 npm run test-filter C2596427` \
Runs smoke tests on cpqa2-va1: `SERVER=cpqa2-va1 npm run smoke-tests` \
Runs specific test case with browser: `SERVER=<env> npm run test-headed C2596427` \
Runs specific test file: `npx playwright test whatsapp-feed-view.spec.ts` \
Runs specific test case in debug mode: `SERVER=<env> npm run test-debug C1234567` \
Runs specific test case in slowmo mode: `SLOWMO=TRUE npx playwright test -g C1234567` \
Runs specific test case repeatedly: `npx playwright test -g C1234567 --repeat-each=10` \
Runs playwright codegen: `npx playwright codegen` \
Runs HTML Reporter: `npm run report` \
* full reference: https://playwright.dev/docs/test-cli \

## Conventions
### Folder name
all lower case and kebab case
### File name/Test name
kebab case
### Variable
camel case
### Constant
All upper case and snake case 
#### Test name format:
```
TestrailID-TestName(Test name should start with the chat typ(SUC/MUC/SMS/GroupText/WhatsApp/Channel))
C3674156-SMS-mini-vCard-is-displayed-when-hover-over-chat-header-avatar-in-invite.spec.ts

```
#### For file that contain only 1 test
Use TestUtils to generate test name and test tags, this will reduce maintiance needed and eliminate files name and test name  mismatch.
##### TestUtil methods
| Method | Description |
| --- | --- |
| `testName` | Extract test name by file name |
| `testTag` | Generate tags according to folder structure e.g. test/sms/feed-view/footer/test.spec.ts will generate @sms @feed-view @footer|
| `testAnnoation` | Extract TestRail case ID from file name, and return an object that contains the annotation info. This will create a link to testrail on HTML report|
```
import { TestUtils } from 'Helpers/test-utils';
const { testAnnotation, testName, testTags } = TestUtils.getTestInfo(__filename);

```

#### To use info generated by TestUtil
```
test(`${testName} ${testTags} @Mini-vCard @Mini-vCard-sanity`, async ({ page }) => {
    test.info().annotations.push(testAnnotation);
    ...
})

```
